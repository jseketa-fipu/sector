apiVersion: apps/v1
kind: Deployment
metadata:
  name: sim-worker
  namespace: sector-sim
spec:
  replicas: 1
  strategy:
    type: Recreate
  selector:
    matchLabels:
      app: sim-worker
  template:
    metadata:
      labels:
        app: sim-worker
    spec:
      containers:
        - name: sim-worker
          image: distributed-app:latest
          imagePullPolicy: IfNotPresent
          command: ["bash", "-c", "python services/sim_worker/worker.py"]
          envFrom:
            - configMapRef:
                name: redis-config
          env:
            - name: PYTHONPATH
              value: /app
            - name: RESET_UNIVERSE_ON_START
              value: "true"
            - name: ORDER_BLOCK_MS
              value: "1"
            - name: LEASE_TTL_MS
              value: "60000"
